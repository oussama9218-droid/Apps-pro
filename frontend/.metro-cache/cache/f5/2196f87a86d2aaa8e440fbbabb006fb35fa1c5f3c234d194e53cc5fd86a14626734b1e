{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const checkAuthState = async () => {\n      try {\n        const savedToken = await AsyncStorage.default.getItem('auth_token');\n        if (savedToken) {\n          const response = await fetch(`${API_URL}/api/auth/me`, {\n            headers: {\n              'Authorization': `Bearer ${savedToken}`,\n              'Content-Type': 'application/json'\n            }\n          });\n          if (response.ok) {\n            const userData = await response.json();\n            setUser(userData);\n            setToken(savedToken);\n          } else {\n            await AsyncStorage.default.removeItem('auth_token');\n          }\n        }\n      } catch (error) {\n        console.error('Error checking auth state:', error);\n        await AsyncStorage.default.removeItem('auth_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.detail || 'Erreur de connexion');\n        }\n        const data = await response.json();\n        setUser(data.user);\n        setToken(data.access_token);\n        await AsyncStorage.default.setItem('auth_token', data.access_token);\n      } catch (error) {\n        console.error('Login error:', error);\n        throw error;\n      }\n    };\n    const register = async (email, password, firstName, lastName) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password,\n            first_name: firstName,\n            last_name: lastName\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.detail || 'Erreur lors de l\\'inscription');\n        }\n        const data = await response.json();\n        setUser(data.user);\n        setToken(data.access_token);\n        await AsyncStorage.default.setItem('auth_token', data.access_token);\n      } catch (error) {\n        console.error('Register error:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('auth_token');\n        setUser(null);\n        setToken(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    (0, _react.useEffect)(() => {\n      checkAuthState();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        register,\n        logout,\n        loading,\n        checkAuthState\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":145,"map":[[13,2,26,15,"Object"],[13,8,26,15],[13,9,26,15,"defineProperty"],[13,23,26,15],[13,24,26,15,"exports"],[13,31,26,15],[14,4,26,15,"enumerable"],[14,14,26,15],[15,4,26,15,"get"],[15,7,26,15],[15,18,26,15,"get"],[15,19,26,15],[16,6,26,15],[16,13,26,15,"AuthProvider"],[16,25,26,15],[17,4,26,15],[18,2,26,15],[19,2,144,0,"exports"],[19,9,144,0],[19,10,144,0,"useAuth"],[19,17,144,0],[19,20,144,0,"useAuth"],[19,27,144,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,42,2,0],[21,45,2,0,"require"],[21,52,2,0],[21,53,2,0,"_dependencyMap"],[21,67,2,0],[22,2,2,0],[22,6,2,0,"AsyncStorage"],[22,18,2,0],[22,21,2,0,"_interopDefault"],[22,36,2,0],[22,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,73,2,0],[23,2,2,69],[23,6,2,69,"_reactJsxDevRuntime"],[23,25,2,69],[23,28,2,69,"require"],[23,35,2,69],[23,36,2,69,"_dependencyMap"],[23,50,2,69],[24,2,22,0],[24,8,22,6,"AuthContext"],[24,19,22,17],[24,35,22,20],[24,39,22,20,"createContext"],[24,45,22,33],[24,46,22,33,"createContext"],[24,59,22,33],[24,61,22,63,"undefined"],[24,70,22,72],[24,71,22,73],[25,2,24,0],[25,8,24,6,"API_URL"],[25,15,24,13],[25,18,24,16,"process"],[25,25,24,23],[25,26,24,24,"env"],[25,29,24,27],[25,30,24,28,"EXPO_PUBLIC_BACKEND_URL"],[25,53,24,51],[25,57,24,55],[25,80,24,78],[26,2,26,15],[26,11,26,24,"AuthProvider"],[26,23,26,36,"AuthProvider"],[26,24,26,37],[27,4,26,39,"children"],[28,2,26,73],[28,3,26,74],[28,5,26,76],[29,4,27,2],[29,10,27,8],[29,11,27,9,"user"],[29,15,27,13],[29,17,27,15,"setUser"],[29,24,27,22],[29,25,27,23],[29,28,27,26],[29,32,27,26,"useState"],[29,38,27,34],[29,39,27,34,"useState"],[29,47,27,34],[29,49,27,48],[29,53,27,52],[29,54,27,53],[30,4,28,2],[30,10,28,8],[30,11,28,9,"token"],[30,16,28,14],[30,18,28,16,"setToken"],[30,26,28,24],[30,27,28,25],[30,30,28,28],[30,34,28,28,"useState"],[30,40,28,36],[30,41,28,36,"useState"],[30,49,28,36],[30,51,28,52],[30,55,28,56],[30,56,28,57],[31,4,29,2],[31,10,29,8],[31,11,29,9,"loading"],[31,18,29,16],[31,20,29,18,"setLoading"],[31,30,29,28],[31,31,29,29],[31,34,29,32],[31,38,29,32,"useState"],[31,44,29,40],[31,45,29,40,"useState"],[31,53,29,40],[31,55,29,41],[31,59,29,45],[31,60,29,46],[32,4,31,2],[32,10,31,8,"checkAuthState"],[32,24,31,22],[32,27,31,25],[32,33,31,25,"checkAuthState"],[32,34,31,25],[32,39,31,37],[33,6,32,4],[33,10,32,8],[34,8,33,6],[34,14,33,12,"savedToken"],[34,24,33,22],[34,27,33,25],[34,33,33,31,"AsyncStorage"],[34,45,33,43],[34,46,33,43,"default"],[34,53,33,43],[34,54,33,44,"getItem"],[34,61,33,51],[34,62,33,52],[34,74,33,64],[34,75,33,65],[35,8,34,6],[35,12,34,10,"savedToken"],[35,22,34,20],[35,24,34,22],[36,10,35,8],[36,16,35,14,"response"],[36,24,35,22],[36,27,35,25],[36,33,35,31,"fetch"],[36,38,35,36],[36,39,35,37],[36,42,35,40,"API_URL"],[36,49,35,47],[36,63,35,61],[36,65,35,63],[37,12,36,10,"headers"],[37,19,36,17],[37,21,36,19],[38,14,37,12],[38,29,37,27],[38,31,37,29],[38,41,37,39,"savedToken"],[38,51,37,49],[38,53,37,51],[39,14,38,12],[39,28,38,26],[39,30,38,28],[40,12,39,10],[41,10,40,8],[41,11,40,9],[41,12,40,10],[42,10,42,8],[42,14,42,12,"response"],[42,22,42,20],[42,23,42,21,"ok"],[42,25,42,23],[42,27,42,25],[43,12,43,10],[43,18,43,16,"userData"],[43,26,43,24],[43,29,43,27],[43,35,43,33,"response"],[43,43,43,41],[43,44,43,42,"json"],[43,48,43,46],[43,49,43,47],[43,50,43,48],[44,12,44,10,"setUser"],[44,19,44,17],[44,20,44,18,"userData"],[44,28,44,26],[44,29,44,27],[45,12,45,10,"setToken"],[45,20,45,18],[45,21,45,19,"savedToken"],[45,31,45,29],[45,32,45,30],[46,10,46,8],[46,11,46,9],[46,17,46,15],[47,12,47,10],[47,18,47,16,"AsyncStorage"],[47,30,47,28],[47,31,47,28,"default"],[47,38,47,28],[47,39,47,29,"removeItem"],[47,49,47,39],[47,50,47,40],[47,62,47,52],[47,63,47,53],[48,10,48,8],[49,8,49,6],[50,6,50,4],[50,7,50,5],[50,8,50,6],[50,15,50,13,"error"],[50,20,50,18],[50,22,50,20],[51,8,51,6,"console"],[51,15,51,13],[51,16,51,14,"error"],[51,21,51,19],[51,22,51,20],[51,50,51,48],[51,52,51,50,"error"],[51,57,51,55],[51,58,51,56],[52,8,52,6],[52,14,52,12,"AsyncStorage"],[52,26,52,24],[52,27,52,24,"default"],[52,34,52,24],[52,35,52,25,"removeItem"],[52,45,52,35],[52,46,52,36],[52,58,52,48],[52,59,52,49],[53,6,53,4],[53,7,53,5],[53,16,53,14],[54,8,54,6,"setLoading"],[54,18,54,16],[54,19,54,17],[54,24,54,22],[54,25,54,23],[55,6,55,4],[56,4,56,2],[56,5,56,3],[57,4,58,2],[57,10,58,8,"login"],[57,15,58,13],[57,18,58,16],[57,24,58,16,"login"],[57,25,58,23,"email"],[57,30,58,36],[57,32,58,38,"password"],[57,40,58,54],[57,45,58,59],[58,6,59,4],[58,10,59,8],[59,8,60,6],[59,14,60,12,"response"],[59,22,60,20],[59,25,60,23],[59,31,60,29,"fetch"],[59,36,60,34],[59,37,60,35],[59,40,60,38,"API_URL"],[59,47,60,45],[59,64,60,62],[59,66,60,64],[60,10,61,8,"method"],[60,16,61,14],[60,18,61,16],[60,24,61,22],[61,10,62,8,"headers"],[61,17,62,15],[61,19,62,17],[62,12,63,10],[62,26,63,24],[62,28,63,26],[63,10,64,8],[63,11,64,9],[64,10,65,8,"body"],[64,14,65,12],[64,16,65,14,"JSON"],[64,20,65,18],[64,21,65,19,"stringify"],[64,30,65,28],[64,31,65,29],[65,12,65,31,"email"],[65,17,65,36],[66,12,65,38,"password"],[67,10,65,47],[67,11,65,48],[68,8,66,6],[68,9,66,7],[68,10,66,8],[69,8,68,6],[69,12,68,10],[69,13,68,11,"response"],[69,21,68,19],[69,22,68,20,"ok"],[69,24,68,22],[69,26,68,24],[70,10,69,8],[70,16,69,14,"error"],[70,21,69,19],[70,24,69,22],[70,30,69,28,"response"],[70,38,69,36],[70,39,69,37,"json"],[70,43,69,41],[70,44,69,42],[70,45,69,43],[71,10,70,8],[71,16,70,14],[71,20,70,18,"Error"],[71,25,70,23],[71,26,70,24,"error"],[71,31,70,29],[71,32,70,30,"detail"],[71,38,70,36],[71,42,70,40],[71,63,70,61],[71,64,70,62],[72,8,71,6],[73,8,73,6],[73,14,73,12,"data"],[73,18,73,16],[73,21,73,19],[73,27,73,25,"response"],[73,35,73,33],[73,36,73,34,"json"],[73,40,73,38],[73,41,73,39],[73,42,73,40],[74,8,74,6,"setUser"],[74,15,74,13],[74,16,74,14,"data"],[74,20,74,18],[74,21,74,19,"user"],[74,25,74,23],[74,26,74,24],[75,8,75,6,"setToken"],[75,16,75,14],[75,17,75,15,"data"],[75,21,75,19],[75,22,75,20,"access_token"],[75,34,75,32],[75,35,75,33],[76,8,76,6],[76,14,76,12,"AsyncStorage"],[76,26,76,24],[76,27,76,24,"default"],[76,34,76,24],[76,35,76,25,"setItem"],[76,42,76,32],[76,43,76,33],[76,55,76,45],[76,57,76,47,"data"],[76,61,76,51],[76,62,76,52,"access_token"],[76,74,76,64],[76,75,76,65],[77,6,77,4],[77,7,77,5],[77,8,77,6],[77,15,77,13,"error"],[77,20,77,18],[77,22,77,20],[78,8,78,6,"console"],[78,15,78,13],[78,16,78,14,"error"],[78,21,78,19],[78,22,78,20],[78,36,78,34],[78,38,78,36,"error"],[78,43,78,41],[78,44,78,42],[79,8,79,6],[79,14,79,12,"error"],[79,19,79,17],[80,6,80,4],[81,4,81,2],[81,5,81,3],[82,4,83,2],[82,10,83,8,"register"],[82,18,83,16],[82,21,83,19],[82,27,83,19,"register"],[82,28,83,26,"email"],[82,33,83,39],[82,35,83,41,"password"],[82,43,83,57],[82,45,83,59,"firstName"],[82,54,83,76],[82,56,83,78,"lastName"],[82,64,83,94],[82,69,83,99],[83,6,84,4],[83,10,84,8],[84,8,85,6],[84,14,85,12,"response"],[84,22,85,20],[84,25,85,23],[84,31,85,29,"fetch"],[84,36,85,34],[84,37,85,35],[84,40,85,38,"API_URL"],[84,47,85,45],[84,67,85,65],[84,69,85,67],[85,10,86,8,"method"],[85,16,86,14],[85,18,86,16],[85,24,86,22],[86,10,87,8,"headers"],[86,17,87,15],[86,19,87,17],[87,12,88,10],[87,26,88,24],[87,28,88,26],[88,10,89,8],[88,11,89,9],[89,10,90,8,"body"],[89,14,90,12],[89,16,90,14,"JSON"],[89,20,90,18],[89,21,90,19,"stringify"],[89,30,90,28],[89,31,90,29],[90,12,91,10,"email"],[90,17,91,15],[91,12,92,10,"password"],[91,20,92,18],[92,12,93,10,"first_name"],[92,22,93,20],[92,24,93,22,"firstName"],[92,33,93,31],[93,12,94,10,"last_name"],[93,21,94,19],[93,23,94,21,"lastName"],[94,10,95,8],[94,11,95,9],[95,8,96,6],[95,9,96,7],[95,10,96,8],[96,8,98,6],[96,12,98,10],[96,13,98,11,"response"],[96,21,98,19],[96,22,98,20,"ok"],[96,24,98,22],[96,26,98,24],[97,10,99,8],[97,16,99,14,"error"],[97,21,99,19],[97,24,99,22],[97,30,99,28,"response"],[97,38,99,36],[97,39,99,37,"json"],[97,43,99,41],[97,44,99,42],[97,45,99,43],[98,10,100,8],[98,16,100,14],[98,20,100,18,"Error"],[98,25,100,23],[98,26,100,24,"error"],[98,31,100,29],[98,32,100,30,"detail"],[98,38,100,36],[98,42,100,40],[98,73,100,71],[98,74,100,72],[99,8,101,6],[100,8,103,6],[100,14,103,12,"data"],[100,18,103,16],[100,21,103,19],[100,27,103,25,"response"],[100,35,103,33],[100,36,103,34,"json"],[100,40,103,38],[100,41,103,39],[100,42,103,40],[101,8,104,6,"setUser"],[101,15,104,13],[101,16,104,14,"data"],[101,20,104,18],[101,21,104,19,"user"],[101,25,104,23],[101,26,104,24],[102,8,105,6,"setToken"],[102,16,105,14],[102,17,105,15,"data"],[102,21,105,19],[102,22,105,20,"access_token"],[102,34,105,32],[102,35,105,33],[103,8,106,6],[103,14,106,12,"AsyncStorage"],[103,26,106,24],[103,27,106,24,"default"],[103,34,106,24],[103,35,106,25,"setItem"],[103,42,106,32],[103,43,106,33],[103,55,106,45],[103,57,106,47,"data"],[103,61,106,51],[103,62,106,52,"access_token"],[103,74,106,64],[103,75,106,65],[104,6,107,4],[104,7,107,5],[104,8,107,6],[104,15,107,13,"error"],[104,20,107,18],[104,22,107,20],[105,8,108,6,"console"],[105,15,108,13],[105,16,108,14,"error"],[105,21,108,19],[105,22,108,20],[105,39,108,37],[105,41,108,39,"error"],[105,46,108,44],[105,47,108,45],[106,8,109,6],[106,14,109,12,"error"],[106,19,109,17],[107,6,110,4],[108,4,111,2],[108,5,111,3],[109,4,113,2],[109,10,113,8,"logout"],[109,16,113,14],[109,19,113,17],[109,25,113,17,"logout"],[109,26,113,17],[109,31,113,29],[110,6,114,4],[110,10,114,8],[111,8,115,6],[111,14,115,12,"AsyncStorage"],[111,26,115,24],[111,27,115,24,"default"],[111,34,115,24],[111,35,115,25,"removeItem"],[111,45,115,35],[111,46,115,36],[111,58,115,48],[111,59,115,49],[112,8,116,6,"setUser"],[112,15,116,13],[112,16,116,14],[112,20,116,18],[112,21,116,19],[113,8,117,6,"setToken"],[113,16,117,14],[113,17,117,15],[113,21,117,19],[113,22,117,20],[114,6,118,4],[114,7,118,5],[114,8,118,6],[114,15,118,13,"error"],[114,20,118,18],[114,22,118,20],[115,8,119,6,"console"],[115,15,119,13],[115,16,119,14,"error"],[115,21,119,19],[115,22,119,20],[115,37,119,35],[115,39,119,37,"error"],[115,44,119,42],[115,45,119,43],[116,6,120,4],[117,4,121,2],[117,5,121,3],[118,4,123,2],[118,8,123,2,"useEffect"],[118,14,123,11],[118,15,123,11,"useEffect"],[118,24,123,11],[118,26,123,12],[118,32,123,18],[119,6,124,4,"checkAuthState"],[119,20,124,18],[119,21,124,19],[119,22,124,20],[120,4,125,2],[120,5,125,3],[120,7,125,5],[120,9,125,7],[120,10,125,8],[121,4,127,2],[121,24,128,4],[121,28,128,4,"_reactJsxDevRuntime"],[121,47,128,4],[121,48,128,4,"jsxDEV"],[121,54,128,4],[121,56,128,5,"AuthContext"],[121,67,128,16],[121,68,128,17,"Provider"],[121,76,128,25],[122,6,129,6,"value"],[122,11,129,11],[122,13,129,13],[123,8,130,8,"user"],[123,12,130,12],[124,8,131,8,"token"],[124,13,131,13],[125,8,132,8,"login"],[125,13,132,13],[126,8,133,8,"register"],[126,16,133,16],[127,8,134,8,"logout"],[127,14,134,14],[128,8,135,8,"loading"],[128,15,135,15],[129,8,136,8,"checkAuthState"],[130,6,137,6],[130,7,137,8],[131,6,137,8,"children"],[131,14,137,8],[131,16,139,7,"children"],[132,4,139,15],[133,6,139,15,"fileName"],[133,14,139,15],[133,16,139,15,"_jsxFileName"],[133,28,139,15],[134,6,139,15,"lineNumber"],[134,16,139,15],[135,6,139,15,"columnNumber"],[135,18,139,15],[136,4,139,15],[136,11,140,26],[136,12,140,27],[137,2,142,0],[138,2,144,7],[138,11,144,16,"useAuth"],[138,18,144,23,"useAuth"],[138,19,144,23],[138,21,144,26],[139,4,145,2],[139,10,145,8,"context"],[139,17,145,15],[139,20,145,18],[139,24,145,18,"useContext"],[139,30,145,28],[139,31,145,28,"useContext"],[139,41,145,28],[139,43,145,29,"AuthContext"],[139,54,145,40],[139,55,145,41],[140,4,146,2],[140,8,146,6,"context"],[140,15,146,13],[140,20,146,18,"undefined"],[140,29,146,27],[140,31,146,29],[141,6,147,4],[141,12,147,10],[141,16,147,14,"Error"],[141,21,147,19],[141,22,147,20],[141,67,147,65],[141,68,147,66],[142,4,148,2],[143,4,149,2],[143,11,149,9,"context"],[143,18,149,16],[144,2,150,0],[145,0,150,1],[145,3]],"functionMap":{"names":["<global>","AuthProvider","checkAuthState","login","register","logout","useEffect$argument_0","useAuth"],"mappings":"AAA;eCyB;yBCK;GDyB;gBEE;GFuB;mBGE;GH4B;iBIE;GJQ;YKE;GLE;CDiB;OOE"},"hasCjsExports":false},"type":"js/module"}]}